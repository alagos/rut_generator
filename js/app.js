(function(){var t;t=angular.module("app",["angular-select-text"]);t.controller("RutController",["$filter",function(t){this.ruts=[];this.input="";this.lastInput="";this.rutOpts={quantity:12,minValue:1e6,maxValue:4e7};this.generateRut=function(){var t,e,n,r,u,i;if(this.input===""||this.getInput()!==this.lastInput){n=[];t=0;while(t<this.rutOpts.quantity){i=this.getRandomNumber();r=0;e=false;while(r<n.length){if(n[r].number===i){e=true;break}r++}if(!e){u=this.getMod(i);n.push({number:i,mod:u})}t++}this.lastInput=this.getInput();return this.ruts=n}};this.getRandomNumber=function(){var t,e,n,r;r=this.rutOpts.minValue;n=this.rutOpts.maxValue;t=this.getInput();e=parseInt(t);if(!e||t.length>8){return Math.floor(Math.random()*(n-r+1))+r}else{return e}};this.getInput=function(){return this.input.replace(/\D/g,"")};this.getMod=function(t){var e,n;e=0;n=1;while(t){n=(n+t%10*(9-e++%6))%11;t=Math.floor(t/10)}if(n){return n-1}else{return"K"}};this.download=function(){var e,n;n=this.ruts.map(t("rutFormat")).join("%0A");e=document.createElement("a");e.href="data:attachment/txt,"+n;e.target="_blank";e.download="gen-ruts-"+Date.now()+".txt";document.body.appendChild(e);e.click()};return this.generateRut()}]);return t.filter("rutFormat",function(){return function(t){return t.number.toLocaleString("cl-ES")+"-"+t.mod}})})();